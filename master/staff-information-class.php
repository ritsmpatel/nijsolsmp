<?php class Staff_Information_Class extends DataBase{		/*Add staff information*/		function Add_Staff_Information(){			$error = "";						if(empty($_POST['stfSurname']))			{				$error.= "Please enter surname.<br>";				}			if(empty($_POST['stfStaffName']))			{				$error.= "Please enter name.<br>";				}			if(empty($_POST['stfFatherHusbandName']))			{				$error.= "Please enter father/husband name.<br>";				}			if(empty($_POST['stfBirthDate']))			{				$error.= "Please select birth date.<br>";				}			if(empty($_POST['stfGender']))			{				$error.= "Please select gender.<br>";				}			if(empty($_POST['stfAddress']))			{				$error.= "Please enter address.<br>";				}			if(empty($_POST['stfMobileNo']))			{				$error.= "Please enter mobile no.<br>";				}			if(empty($_POST['stfCity']))			{				$error.= "Please enter city.<br>";				}			if(empty($_POST['stfDesignation']))			{				$error.= "Please select designation.<br>";				}			if(empty($_POST['stfCast']))			{				$error.= "Please enter cast.<br>";				}			if(empty($_POST['stfCategory']))			{				$error.= "Please select category.<br>";				}						if(empty($_POST['stfMobileNo']))			{				$error.= "Please enter mobile no.<br>";			}			else			{				$check_mobile_num=Common_Nijsol_Class::Validate_Mobile_Number($_POST['stfMobileNo']);				if(!$check_mobile_num)				{					$error.= "Please enter valid mobile number.<br>";				}			}						if(!empty($_POST['stfEmail']))			{				if (!filter_var($_POST['stfEmail'], FILTER_VALIDATE_EMAIL)) {				  $error.= "Invalid email format.<br>";				}			}												if(empty($error))			{								$EmpNo=$this->Direct_Query("SELECT max(stfEmpNo) as stfEmpNo FROM ".DB_PREFIX."staff WHERE schCode='".Common_Nijsol_Class::Get_Session('schCode')."'");		  if(!empty($EmpNo[0]['stfEmpNo']))		  		$EmpNo=Common_Nijsol_Class::Get_Value($EmpNo[0]['stfEmpNo'])+1;		  else		  		$EmpNo=1;				$column=array(                     'stfEmpNo'=>Common_Nijsol_Class::Set_Value($EmpNo),					  'stfSurname'=>Common_Nijsol_Class::Set_Value($_POST['stfSurname']),					  'stfStaffName'=>Common_Nijsol_Class::Set_Value($_POST['stfStaffName']),					  'stfFatherHusbandName'=>Common_Nijsol_Class::Set_Value($_POST['stfFatherHusbandName']),					  'stfAddress'=>Common_Nijsol_Class::Set_Value($_POST['stfAddress']),					  'stfCity'=>Common_Nijsol_Class::Set_Value($_POST['stfCity']),					  'stfPinCode'=>Common_Nijsol_Class::Set_Value($_POST['stfPinCode']),					  'stfTaluka'=>Common_Nijsol_Class::Set_Value($_POST['stfTaluka']),					  'stfDistrict'=>Common_Nijsol_Class::Set_Value($_POST['stfDistrict']),					  'stfGender'=>Common_Nijsol_Class::Set_Value($_POST['stfGender']),					  'stfBloodGroup'=>Common_Nijsol_Class::Set_Value($_POST['stfBloodGroup']),					  'stfHomeNo'=>Common_Nijsol_Class::Set_Value($_POST['stfHomeNo']),					  'stfMobileNo'=>Common_Nijsol_Class::Set_Value($_POST['stfMobileNo']),					  'stfBirthDate'=>Common_Nijsol_Class::Convert_Date_To_Mysql_Format($_POST['stfBirthDate']),					  'stfCast'=>Common_Nijsol_Class::Set_Value($_POST['stfCast']),					  'stfReligion'=>Common_Nijsol_Class::Set_Value($_POST['stfReligion']),					  'stfEmail'=>Common_Nijsol_Class::Set_Value($_POST['stfEmail']),					  'stfCategory'=>Common_Nijsol_Class::Set_Value($_POST['stfCategory']),					  'stfDesignation'=>Common_Nijsol_Class::Set_Value($_POST['stfDesignation']),					  'stfSubject'=>Common_Nijsol_Class::Set_Value($_POST['stfSubject']),					  'stfSalary'=>Common_Nijsol_Class::Set_Value($_POST['stfSalary']),					  'stfPhoto'=>Common_Nijsol_Class::Set_Value(Common_Nijsol_Class::Get_Session('staff-photo')),					  'stfQualification1'=>Common_Nijsol_Class::Set_Value($_POST['stfQualification1']),					  'stfClass1'=>Common_Nijsol_Class::Set_Value($_POST['stfClass1']),					  'stfPercentage1'=>Common_Nijsol_Class::Set_Value($_POST['stfPercentage1']),					  'stfQualification2'=>Common_Nijsol_Class::Set_Value($_POST['stfQualification2']),					  'stfClass2'=>Common_Nijsol_Class::Set_Value($_POST['stfClass2']),					  'stfPercentage2'=>Common_Nijsol_Class::Set_Value($_POST['stfPercentage2']),					  'stfQualification3'=>Common_Nijsol_Class::Set_Value($_POST['stfQualification3']),					  'stfClass3'=>Common_Nijsol_Class::Set_Value($_POST['stfClass3']),					  'stfPercentage3'=>Common_Nijsol_Class::Set_Value($_POST['stfPercentage3']),					  'stfPhysicalHandicap'=>Common_Nijsol_Class::Set_Value($_POST['stfPhysicalHandicap']),					  'stfJoiningDate'=>Common_Nijsol_Class::Convert_Date_To_Mysql_Format($_POST['stfJoiningDate']),					  'schCode'=>Common_Nijsol_Class::Get_Session('schCode'),					  'usrId'=>Common_Nijsol_Class::Get_Session(ADMIN_LOGIN_USER_ID)					  );					  										$result=$this->Insert_Row(DB_PREFIX."staff",$column);										if(!empty($result))						{							Common_Nijsol_Class::Set_Session('msg','Add staff information successfully.');						Common_Nijsol_Class::Set_Session('error_success','success');						Common_Nijsol_Class::Redirect_To(MASTER_URL.'staff-information-manage.php');						}					else					{						Common_Nijsol_Class::Set_Session('msg','Invalid data');						Common_Nijsol_Class::Set_Session('error_success','error');						Common_Nijsol_Class::Redirect_To(MASTER_URL.'staff-information-add-edit.php?mode=add');					}			}			else			{				Common_Nijsol_Class::Set_Session('msg',$error);				Common_Nijsol_Class::Set_Session('error_success','error');				Common_Nijsol_Class::Redirect_To(MASTER_URL.'staff-information-add-edit.php?mode=add');				}		}							/*Edit staff information*/		function Edit_Staff_Information(){						$error = "";						if(empty($_POST['stfSurname']))			{				$error.= "Please enter surname.<br>";				}			if(empty($_POST['stfStaffName']))			{				$error.= "Please enter name.<br>";				}			if(empty($_POST['stfFatherHusbandName']))			{				$error.= "Please enter father/husband name.<br>";				}			if(empty($_POST['stfBirthDate']))			{				$error.= "Please select birth date.<br>";				}			if(empty($_POST['stfGender']))			{				$error.= "Please select gender.<br>";				}			if(empty($_POST['stfAddress']))			{				$error.= "Please enter address.<br>";				}			if(empty($_POST['stfMobileNo']))			{				$error.= "Please enter mobile no.<br>";				}			if(empty($_POST['stfCity']))			{				$error.= "Please enter city.<br>";				}			if(empty($_POST['stfDesignation']))			{				$error.= "Please select designation.<br>";				}			if(empty($_POST['stfCast']))			{				$error.= "Please enter cast.<br>";				}			if(empty($_POST['stfCategory']))			{				$error.= "Please select category.<br>";				}						if(empty($_POST['stfMobileNo']))			{				$error.= "Please enter mobile no.<br>";			}			else			{				$check_mobile_num=Common_Nijsol_Class::Validate_Mobile_Number($_POST['stfMobileNo']);				if(!$check_mobile_num)				{					$error.= "Please enter valid mobile number.<br>";				}			}						if(!empty($_POST['stfEmail']))			{				if (!filter_var($_POST['stfEmail'], FILTER_VALIDATE_EMAIL)) {				  $error.= "Invalid email format.<br>";				}			}												if(empty($error))			{				$column=array(                      /*'stfEmpNo'=>Common_Nijsol_Class::Set_Value($_POST['stfEmpNo']),*/					  'stfSurname'=>Common_Nijsol_Class::Set_Value($_POST['stfSurname']),					  'stfStaffName'=>Common_Nijsol_Class::Set_Value($_POST['stfStaffName']),					  'stfFatherHusbandName'=>Common_Nijsol_Class::Set_Value($_POST['stfFatherHusbandName']),					  'stfAddress'=>Common_Nijsol_Class::Set_Value($_POST['stfAddress']),					  'stfCity'=>Common_Nijsol_Class::Set_Value($_POST['stfCity']),					  'stfPinCode'=>Common_Nijsol_Class::Set_Value($_POST['stfPinCode']),					  'stfTaluka'=>Common_Nijsol_Class::Set_Value($_POST['stfTaluka']),					  'stfDistrict'=>Common_Nijsol_Class::Set_Value($_POST['stfDistrict']),					  'stfGender'=>Common_Nijsol_Class::Set_Value($_POST['stfGender']),					  'stfBloodGroup'=>Common_Nijsol_Class::Set_Value($_POST['stfBloodGroup']),					  'stfHomeNo'=>Common_Nijsol_Class::Set_Value($_POST['stfHomeNo']),					  'stfMobileNo'=>Common_Nijsol_Class::Set_Value($_POST['stfMobileNo']),					  'stfBirthDate'=>Common_Nijsol_Class::Convert_Date_To_Mysql_Format($_POST['stfBirthDate']),					  'stfCast'=>Common_Nijsol_Class::Set_Value($_POST['stfCast']),					  'stfReligion'=>Common_Nijsol_Class::Set_Value($_POST['stfReligion']),					  'stfEmail'=>Common_Nijsol_Class::Set_Value($_POST['stfEmail']),					  'stfCategory'=>Common_Nijsol_Class::Set_Value($_POST['stfCategory']),					  'stfDesignation'=>Common_Nijsol_Class::Set_Value($_POST['stfDesignation']),					  'stfSubject'=>Common_Nijsol_Class::Set_Value($_POST['stfSubject']),					  'stfSalary'=>Common_Nijsol_Class::Set_Value($_POST['stfSalary']),					  'stfPhoto'=>Common_Nijsol_Class::Set_Value(Common_Nijsol_Class::Get_Session('staff-photo')),					  'stfQualification1'=>Common_Nijsol_Class::Set_Value($_POST['stfQualification1']),					  'stfClass1'=>Common_Nijsol_Class::Set_Value($_POST['stfClass1']),					  'stfPercentage1'=>Common_Nijsol_Class::Set_Value($_POST['stfPercentage1']),					  'stfQualification2'=>Common_Nijsol_Class::Set_Value($_POST['stfQualification2']),					  'stfClass2'=>Common_Nijsol_Class::Set_Value($_POST['stfClass2']),					  'stfPercentage2'=>Common_Nijsol_Class::Set_Value($_POST['stfPercentage2']),					  'stfQualification3'=>Common_Nijsol_Class::Set_Value($_POST['stfQualification3']),					  'stfClass3'=>Common_Nijsol_Class::Set_Value($_POST['stfClass3']),					  'stfPercentage3'=>Common_Nijsol_Class::Set_Value($_POST['stfPercentage3']),					  'stfPhysicalHandicap'=>Common_Nijsol_Class::Set_Value($_POST['stfPhysicalHandicap']),					  'stfJoiningDate'=>Common_Nijsol_Class::Convert_Date_To_Mysql_Format($_POST['stfJoiningDate'])					   );										$where = " stfId='".Common_Nijsol_Class::Set_Value($_POST['id'])."' and schCode='".Common_Nijsol_Class::Get_Session('schCode')."'";					$result=$this->Update_Row(DB_PREFIX."staff",$column, $where);

$column=array('tblRecordId'=>Common_Nijsol_Class::Set_Value($_POST['id']),					  'tblName'=>'pgs_staff',					  
'tblTitle'=>'Edit Staff Information',					  
'editMessage'=>Common_Nijsol_Class::Set_Value($_POST['editMessage']),
'editDate'=>date("Y-m-d"),				  
'schCode'=>Common_Nijsol_Class::Get_Session('schCode'),					  
'usrId'=>Common_Nijsol_Class::Get_Session(ADMIN_LOGIN_USER_ID));					  					$result=$this->Insert_Row(DB_PREFIX."edit_message",$column);

Common_Nijsol_Class::Set_Session('msg','Edit staff information successfully.');					Common_Nijsol_Class::Set_Session('error_success','success');					Common_Nijsol_Class::Redirect_To(MASTER_URL.'staff-information-manage.php');				}			else			{				Common_Nijsol_Class::Set_Session('msg',$error);				Common_Nijsol_Class::Set_Session('error_success','error');				Common_Nijsol_Class::Redirect_To(MASTER_URL.'staff-information-add-edit.php?id='.$_POST['id'].'&mode=edit');				}		}}