<?php class Trustee_Information_Class extends DataBase{		 /*Add trustee information*/		function Add_Trustee_Information(){							$error = "";						if(empty($_POST['trsName']))			{				$error.= "Please enter trustee name.<br>";				}			else			{					 $column=" trsName='".Common_Nijsol_Class::Set_Value($_POST['trsName'])."' and schCode='".Common_Nijsol_Class::Get_Session('schCode')."'";					 $field = 'count(trsName) as total';					$result=$this->Get_Rows(DB_PREFIX."trustee",$column,$field);										if($result[0]['total'] > 0)						{						$error.="Trustee information already exists.<br>";						}			}						if(empty($_POST['trsMobileNo']))			{				$error.= "Please enter mobile for sms.<br>";				}			else			{				$check_mobile_num=Common_Nijsol_Class::Validate_Mobile_Number($_POST['trsMobileNo']);				if(!$check_mobile_num)				{					$error.= "Please enter valid mobile number.<br>";				}			}						if(!empty($_POST['trsEmail']))			{				if (!filter_var($_POST['trsEmail'], FILTER_VALIDATE_EMAIL)) {				  $error.= "Invalid email format.<br>";				}			}												if(empty($error))			{				$column=array(                    'trsName'=>Common_Nijsol_Class::Set_Value($_POST['trsName']),					  'trsDesignation'=>Common_Nijsol_Class::Set_Value($_POST['trsDesignation']),					  'trsAddress'=>Common_Nijsol_Class::Set_Value($_POST['trsAddress']),					  'trsCity'=>Common_Nijsol_Class::Set_Value($_POST['trsCity']),					  'trsPinCode'=>Common_Nijsol_Class::Set_Value($_POST['trsPinCode']),					  'trsTaluka'=>Common_Nijsol_Class::Set_Value($_POST['trsTaluka']),					  'trsDistrict'=>Common_Nijsol_Class::Set_Value($_POST['trsDistrict']),					  'trsState'=>Common_Nijsol_Class::Set_Value($_POST['trsState']),					  'trsSTDCode'=>Common_Nijsol_Class::Set_Value($_POST['trsSTDCode']),					  'trsPhoneOffice'=>Common_Nijsol_Class::Set_Value($_POST['trsPhoneOffice']),					  'trsPhoneResidence'=>Common_Nijsol_Class::Set_Value($_POST['trsPhoneResidence']),					  'trsMobileNo'=>Common_Nijsol_Class::Set_Value($_POST['trsMobileNo']),					  'trsFax'=>Common_Nijsol_Class::Set_Value($_POST['trsFax']),					  'trsEmail'=>Common_Nijsol_Class::Email_Checking($_POST['trsEmail']),					  'schCode'=>Common_Nijsol_Class::Get_Session('schCode'),					  'usrId'=>Common_Nijsol_Class::Get_Session(ADMIN_LOGIN_USER_ID)					  );					  					$result=$this->Insert_Row(DB_PREFIX."trustee",$column);										if(!empty($result))						{							Common_Nijsol_Class::Set_Session('msg','Add trustee information successfully.');						Common_Nijsol_Class::Set_Session('error_success','success');						Common_Nijsol_Class::Redirect_To(MASTER_URL.'trustee-information-manage.php');						}					else					{						Common_Nijsol_Class::Set_Session('msg','Invalid data');						Common_Nijsol_Class::Set_Session('error_success','error');						Common_Nijsol_Class::Redirect_To(MASTER_URL.'trustee-information-add-edit.php?mode=add');					}			}			else			{				Common_Nijsol_Class::Set_Session('msg',$error);				Common_Nijsol_Class::Set_Session('error_success','error');				Common_Nijsol_Class::Redirect_To(MASTER_URL.'trustee-information-add-edit.php?mode=add');				}		}							 
/*Edit trustee information*/		
function Edit_Trustee_Information(){							
$error = "";						
if(empty($_POST['trsName']))			
{				
$error.= "Please enter trustee name.<br>";				
}			
else			
{					 
$column=" trsName='".Common_Nijsol_Class::Set_Value($_POST['trsName'])."' and schCode='".Common_Nijsol_Class::Get_Session('schCode')."' and  trsId!='".Common_Nijsol_Class::Set_Value($_POST['id'])."'";					 $field = 'count(trsName) as total';					$result=$this->Get_Rows(DB_PREFIX."trustee",$column,$field);										if($result[0]['total'] > 0)						{						$error.="Trustee information already exists.<br>";						}			}						if(empty($_POST['trsMobileNo']))			{				$error.= "Please enter mobile for sms.<br>";				}			else			{				$check_mobile_num=Common_Nijsol_Class::Validate_Mobile_Number($_POST['trsMobileNo']);				if(!$check_mobile_num)				{					$error.= "Please enter valid mobile number.<br>";				}			}						if(!empty($_POST['trsEmail']))			{				if (!filter_var($_POST['trsEmail'], FILTER_VALIDATE_EMAIL)) {				  $error.= "Invalid email format.<br>";				}			}												if(empty($error))			{				$column=array(                     'trsName'=>Common_Nijsol_Class::Set_Value($_POST['trsName']),					  'trsDesignation'=>Common_Nijsol_Class::Set_Value($_POST['trsDesignation']),					  'trsAddress'=>Common_Nijsol_Class::Set_Value($_POST['trsAddress']),					  'trsCity'=>Common_Nijsol_Class::Set_Value($_POST['trsCity']),					  'trsPinCode'=>Common_Nijsol_Class::Set_Value($_POST['trsPinCode']),					  'trsTaluka'=>Common_Nijsol_Class::Set_Value($_POST['trsTaluka']),					  'trsDistrict'=>Common_Nijsol_Class::Set_Value($_POST['trsDistrict']),					  'trsState'=>Common_Nijsol_Class::Set_Value($_POST['trsState']),					  'trsSTDCode'=>Common_Nijsol_Class::Set_Value($_POST['trsSTDCode']),					  'trsPhoneOffice'=>Common_Nijsol_Class::Set_Value($_POST['trsPhoneOffice']),					  'trsPhoneResidence'=>Common_Nijsol_Class::Set_Value($_POST['trsPhoneResidence']),					  'trsMobileNo'=>Common_Nijsol_Class::Set_Value($_POST['trsMobileNo']),					  'trsFax'=>Common_Nijsol_Class::Set_Value($_POST['trsFax']),					  'trsEmail'=>Common_Nijsol_Class::Email_Checking($_POST['trsEmail']),					  'usrId'=>Common_Nijsol_Class::Get_Session(ADMIN_LOGIN_USER_ID)					   );										$where = " trsId='".Common_Nijsol_Class::Set_Value($_POST['id'])."' and schCode='".Common_Nijsol_Class::Get_Session('schCode')."'";					
$result=$this->Update_Row(DB_PREFIX."trustee",$column, $where);	
		
		
$column=array('tblRecordId'=>Common_Nijsol_Class::Set_Value($_POST['id']),					  'tblName'=>'pgs_trustee',					  
'tblTitle'=>'Edit Trustee Information',					  
'editMessage'=>Common_Nijsol_Class::Set_Value($_POST['editMessage']),
'editDate'=>date("Y-m-d"),				  
'schCode'=>Common_Nijsol_Class::Get_Session('schCode'),					  
'usrId'=>Common_Nijsol_Class::Get_Session(ADMIN_LOGIN_USER_ID));					  					$result=$this->Insert_Row(DB_PREFIX."edit_message",$column);	
		
									
									
Common_Nijsol_Class::Set_Session('msg','Edit trustee information successfully.');					Common_Nijsol_Class::Set_Session('error_success','success');					Common_Nijsol_Class::Redirect_To(MASTER_URL.'trustee-information-manage.php');				}			else			{				Common_Nijsol_Class::Set_Session('msg',$error);				Common_Nijsol_Class::Set_Session('error_success','error');				Common_Nijsol_Class::Redirect_To(MASTER_URL.'trustee-information-add-edit.php?id='.$_POST['id'].'&mode=edit');				}		}}